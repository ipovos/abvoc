(this.webpackJsonpabvoc=this.webpackJsonpabvoc||[]).push([[0],{12:function(e,t,a){e.exports=a.p+"static/media/chime.129e9c15.mp3"},13:function(e,t,a){e.exports=a.p+"static/media/positiveAlert.6b46dda4.mp3"},14:function(e,t,a){e.exports=a(20)},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),i=(a(19),a(2)),l=a(9),d=a(7),s=a(1),u=a(3),p=a(4),m=a(6),h=a(5),g=function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","vocabulary-".concat((new Date).toISOString().replace(/:/g,"_"),".json")),a.click()},f=function(e,t){return e/t*100},y=function(){return"f".concat((~~(1e8*Math.random())).toString(16))},E=function(e){return{title:e,type:"deck",id:y(),recordsIds:[],learnedRecordsIds:[],lastRepetition:null,nextRepetition:null,iteration:0,status:"inProgress"}},k=function(e){return{firstSide:e.firstSide,secondSide:e.secondSide,deckId:e.deckId,id:y(),lastRepetition:null,nextRepetition:null,createdAt:(new Date).toISOString(),iteration:0}},b=function(e){return e.iteration>5},v=function(e){return f(Math.min(e.iteration,5),5)},C=function(e){var t=e.map((function(e){return Math.min(e.iteration,5)})).reduce((function(e,t){return e+t}),0);return f(t,5*e.length)},I=function(e){return r.a.createElement("div",Object.assign({},e,{style:{maxWidth:"60em",margin:"0 auto",padding:"1em 1em 0"}}))},D="hsl(269, 97%, 35%)",S="hsl(269, 96%, 90%)",O="hsl(257, 46%, 59%)",j="hsl(256, 48%, 94%)",R="hsl(138, 76%, 31%)",B="hsl(138, 77%, 90%)",w="hsl(49, 88%, 62%)",x="hsl(50, 86%, 94%)",F="hsl(358, 98%, 54%)",A="hsl(358, 100%, 93%)",P=function(e){var t=e.noPadding,a=Object(i.a)(e,["noPadding"]);return r.a.createElement("article",Object.assign({},a,{style:{border:"1px solid ".concat(O),padding:t?0:"1.3em",borderRadius:"1.3em",marginBottom:"1em"}}))},V=function(e){return r.a.createElement("mark",Object.assign({},e,{style:{backgroundColor:w}}))},U=function(e){var t=e.type,a=void 0===t?"text":t,n=Object(i.a)(e,["type"]);return r.a.createElement("input",Object.assign({type:a},n,{style:{display:"block",width:"100%",boxSizing:"border-box",fontSize:"1em",lineHeight:2,border:"none",borderBottom:"1px solid ".concat(O)}}))},q=function(e){var t=e.caption,a=e.validationError,n=Object(i.a)(e,["caption","validationError"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("i",null,t)),r.a.createElement("br",null),r.a.createElement(U,Object.assign({type:"text",placeholder:"type here..."},n)),r.a.createElement("br",null),(null===a||void 0===a?void 0:a.length)>0?r.a.createElement("div",{style:{color:F}},r.a.createElement("i",null,a)):r.a.createElement("br",null))},z=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return r.a.createElement("h1",Object.assign({},a,{style:{margin:"0",fontSize:"1em",lineHeight:1.5}}),t)},Q=function(e,t){return t?e<33?A:e<66?x:B:S},K=function(e,t){return t?e<33?F:e<66?w:R:D},T=function(e){var t=e.percent,a=e.height,n=void 0===a?"2px":a,c=e.colored,o=void 0!==c&&c;return r.a.createElement("div",{style:{height:n,backgroundColor:Q(t,o)}},r.a.createElement("div",{style:{height:n,backgroundColor:K(t,o),width:"".concat(Math.min(t,100),"%"),transition:"width .1s ease-in-out"}}))},L=function(e){var t=e.look,a=e.wide,n=void 0!==a&&a,c=e.type,o=void 0===c?"button":c,l=Object(i.a)(e,["look","wide","type"]),d={display:"inline-block",width:n?"100%":"initial",fontSize:"1em",borderRadius:"1.3em",border:"1px solid ".concat(O),color:D,padding:"0.65em 1.3em",backgroundColor:j,cursor:"pointer"},u={padding:"1em",fontWeight:700,background:"linear-gradient(30deg, ".concat(D," 30%, ").concat(O," 100%)"),color:"#fff",fontStyle:"italic"};return r.a.createElement("button",Object.assign({},l,{type:o,style:Object(s.a)(Object(s.a)({},d),"purple"===t?u:{})}))},J=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).fileInput=r.a.createRef(),e.onFileChange=function(t){var a=t.target.files;a.length>0&&e.reader.readAsText(a[0])},e.onDataImportButtonClick=function(){e.fileInput.current.click()},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.reader=new FileReader,this.reader.onload=function(t){var a=t.target.result;(0,e.props.onDataImport)(a)}}},{key:"render",value:function(){var e=this.props,t=e.appData,a=e.onDataExport,n=e.onDataReset,c=t.decksCount,o=t.learnedDecksCount,i=t.recordsCount,l=t.learnedRecordsCount;return 0===c?r.a.createElement(P,null,r.a.createElement(z,null,"Abvoc"),r.a.createElement("p",null,r.a.createElement("i",null,"Vocabulary is empty")),r.a.createElement("input",{ref:this.fileInput,id:"fileInput",type:"file",accept:"application/JSON",onChange:this.onFileChange,hidden:!0}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(L,{htmlFor:"fileInput",onClick:this.onDataImportButtonClick,look:"purple",wide:!0},"Import vocabulary"))):r.a.createElement(P,null,r.a.createElement(z,null,"Abvoc"),r.a.createElement(T,{percent:f(l,i)}),r.a.createElement("p",null,o,"/",c," decks learned"),r.a.createElement("p",null,l,"/",i," records learned"),r.a.createElement("input",{ref:this.fileInput,id:"fileInput",type:"file",accept:"application/JSON",onChange:this.onFileChange,hidden:!0}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"}},r.a.createElement(L,{htmlFor:"fileInput",onClick:this.onDataImportButtonClick},"Import vocabulary"),r.a.createElement(L,{onClick:a},"Export vocabulary"),r.a.createElement(L,{onClick:n},"Reset")))}}]),a}(r.a.Component),M=function(e){var t=e.deck,a=e.records,n=e.pageChangeCaption,c=e.onPageChange,o=e.onDeckDelete,i=t.title,l=t.recordsIds,d=t.learnedRecordsIds;return r.a.createElement(P,null,r.a.createElement(z,null,i),r.a.createElement(T,{percent:C(a)}),r.a.createElement("p",null,d.length,"/",l.length," ","records learned"),r.a.createElement("p",null,"Learning in progress"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(L,{onClick:c},n),r.a.createElement(L,{onClick:function(){return o(t)}},"Delete")))},N=function(e){var t=e.caption;return r.a.createElement(P,null,r.a.createElement("div",null,t))},W=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasValidationError:!1,validationError:"",query:""},e.onQueryChange=function(t){var a=e.normalizeQuery(t.target.value),n=e.validateQuery(a);e.setState({hasValidationError:n,query:a,validationError:n?"need more letters":""})},e.normalizeQuery=function(e){return e.trim()},e.validateQuery=function(e){return e.length>0&&e.length<2},e.onFileChange=function(e){var t=new FileReader;t.onload=function(e){console.log(JSON.parse(e.target.result))},e.target.files.length>0&&t.readAsText(e.target.files[0])},e.onDeckCreate=function(){e.props.onDeckCreate(e.state.query),e.setState({hasValidationError:!1,validationError:"",query:""})},e.onSearchKeyUp=function(t){13===t.keyCode&&!e.state.hasValidationError&&e.state.query.length>0&&0===e.getFilteredDecks().length&&e.onDeckCreate()},e.getFilteredDecks=function(){var t=e.state,a=t.hasValidationError,n=t.query,r=e.props.decks;return a?r:r.filter((function(e){return e.title.toLowerCase().includes(n.toLowerCase())}))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.appData,a=e.onPageChange,n=e.onDataImport,c=e.onDataExport,o=e.onDataReset,i=e.onDeckDelete,l=e.getRecordsByDeckId,d=this.state,s=d.validationError,u=d.query,p=this.getFilteredDecks();return r.a.createElement(I,null,r.a.createElement(J,{appData:t,onDataImport:n,onDataExport:c,onDataReset:o}),r.a.createElement(P,null,r.a.createElement(q,{caption:"to search or create decks",value:u,onChange:this.onQueryChange,onKeyUp:this.onSearchKeyUp,validationError:s})),0===p.length&&u.length>0&&r.a.createElement(N,{caption:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"oops, no \u201c",r.a.createElement(V,null,u),"\u201d-containing decks found"),r.a.createElement("br",null),r.a.createElement(L,{onClick:this.onDeckCreate},"Create \u201c",u,"\u201d deck"))}),p.map((function(e){return r.a.createElement(M,{key:e.id,deck:e,records:l(e.id),pageChangeCaption:"See deck",onPageChange:function(){return a("deck",{deckId:e.id})},onDeckDelete:i})})))}}]),a}(r.a.Component),H=function(e){var t=e.list,a=e.onRecordDelete;return r.a.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},t.map((function(e,n){return r.a.createElement("li",{key:e.id,style:{padding:"1em",borderBottom:n===t.length-1?null:"1px solid ".concat(O)}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{flex:"1 1 auto"}},r.a.createElement("p",{style:{margin:0,lineHeight:"1.5"}},r.a.createElement("b",null,e.firstSide)),r.a.createElement(T,{percent:v(e)}),r.a.createElement("p",{style:{margin:0,lineHeight:"1.5"}},e.secondSide)),r.a.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"1em"}},r.a.createElement(L,{onClick:function(){return a(e)}},"Delete"))))})))},_=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onInputChange=function(e){n.setState(Object(d.a)({},e.target.name,e.target.value))},n.onInputKeyUp=function(e){13===e.keyCode&&n.state.firstSide.length>0&&n.state.secondSide.length>0&&n.createRecord()},n.createRecord=function(){var e=n.state,t=e.firstSide,a=e.secondSide;n.props.onRecordCreate({firstSide:t,secondSide:a})},n.state={firstSide:e.initialFirstSide,secondSide:""},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state,t=e.firstSide,a=e.secondSide,n=0===t.length||0===a.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("i",null,"create record")),r.a.createElement("br",null),r.a.createElement("label",{style:{display:"block"},htmlFor:"firstSide"},"First side"),r.a.createElement(U,{type:"text",placeholder:"type here...",name:"firstSide",id:"firstSide",value:t,onChange:this.onInputChange,onKeyUp:this.onInputKeyUp}),r.a.createElement("br",null),r.a.createElement("label",{style:{display:"block"},htmlFor:"secondSide"},"Second side"),r.a.createElement(U,{type:"text",placeholder:"type here...",name:"secondSide",id:"secondSide",value:a,onChange:this.onInputChange,onKeyUp:this.onInputKeyUp,autoFocus:!0}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(L,{disabled:n,onClick:this.createRecord},"Create record")),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("i",null,"enter first and second side"))):r.a.createElement("br",null))}}]),a}(r.a.Component),$=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasValidationError:!1,validationError:"",query:"",isRecordCreating:!1},e.onQueryChange=function(t){var a=e.normalizeQuery(t.target.value),n=e.validateQuery(a);e.setState({hasValidationError:n,query:a,validationError:n?"need more letters":"",isRecordCreating:!1})},e.normalizeQuery=function(e){return e.trim()},e.validateQuery=function(e){return e.length>0&&e.length<2},e.startRecordCreating=function(){e.setState({isRecordCreating:!0})},e.finishRecordCreating=function(){e.setState({hasValidationError:!1,query:"",validationError:"",isRecordCreating:!1})},e.createRecord=function(t){var a=t.firstSide,n=t.secondSide;e.props.onRecordCreate({firstSide:a,secondSide:n,deckId:e.props.deck.id}),e.finishRecordCreating()},e.onSearchKeyUp=function(t){13===t.keyCode&&!e.state.hasValidationError&&e.state.query.length>0&&!e.state.isRecordCreating&&0===e.getFilteredRecords().length&&e.startRecordCreating()},e.getFilteredRecords=function(){var t=e.state,a=t.hasValidationError,n=t.query,r=e.props.records;return a?r:r.filter((function(e){return e.firstSide.toLowerCase().includes(n.toLowerCase())||e.secondSide.toLowerCase().includes(n.toLowerCase())})).sort((function(e,t){return e.createrAt<t.createdAt?1:-1}))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.deck,a=e.records,n=e.onPageChange,c=e.onDeckDelete,o=e.onRecordDelete,i=this.state,l=i.validationError,d=i.query,s=i.isRecordCreating,u=this.getFilteredRecords();return r.a.createElement(I,null,r.a.createElement(M,{deck:t,records:a,pageChangeCaption:"Back",onPageChange:function(){return n("decks",null)},onDeckDelete:function(e){n("decks",null),c(e)}}),r.a.createElement("p",{style:{opacity:0===a.length?.5:1}},r.a.createElement(L,{wide:!0,look:"purple",onClick:function(){return n("training",{deckId:t.id})},disabled:0===a.length},"train")),r.a.createElement(P,null,r.a.createElement(q,{caption:"to search or create records",value:d,onChange:this.onQueryChange,validationError:l,onKeyUp:this.onSearchKeyUp})),0===u.length&&d.length>0&&r.a.createElement(N,{caption:r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"oops, no \u201c",r.a.createElement(V,null,d),"\u201d-containing records found"),r.a.createElement("br",null)),s?r.a.createElement(_,{initialFirstSide:d,onRecordCreate:this.createRecord}):r.a.createElement(L,{onClick:this.startRecordCreating},"Create \u201c",d,"\u201d record"))}),u.length>0&&r.a.createElement(P,{noPadding:!0},r.a.createElement(H,{list:u,onRecordDelete:o})))}}]),a}(r.a.Component),G=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.onValueChange=function(t){var a=t.target.value,n=e.props.onSuccess;100===e.getProgressPercent(a)&&n(),e.setState({value:a})},e.getProgressPercent=function(t){var a=e.props.targetValue,n=e.normalizeValue(a),r=e.normalizeValue(t);return n.startsWith(r)?f(r.length,n.length):0},e.normalizeValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase()},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e){e.targetValue!==this.props.targetValue&&this.setState({value:""})}},{key:"render",value:function(){var e=this.props,t=e.caption,a=(e.targetValue,e.onSuccess,Object(i.a)(e,["caption","targetValue","onSuccess"])),n=this.state.value,c=this.getProgressPercent(n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("i",null,t)),r.a.createElement("br",null),r.a.createElement(U,Object.assign({type:"text",placeholder:"type here...",value:n,onChange:this.onValueChange,autoFocus:!0},a)),r.a.createElement("br",null),r.a.createElement("div",{style:{marginTop:"2px"}},r.a.createElement(T,{percent:c,height:"5px",colored:!0})),r.a.createElement("br",null))}}]),a}(r.a.Component),X=a(12),Y=a.n(X),Z=a(13),ee=a.n(Z),te=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isFinished:!1,currentRecordIndex:0},e.recordSuccessAudio=r.a.createRef(),e.trainingSuccessAudio=r.a.createRef(),e.onSuccessInput=function(){var t=e.props.records;e.state.currentRecordIndex!==t.length-1?e.nextRecord():e.finishTraining()},e.nextRecord=function(){e.playRecordSuccessAudio(),e.setState((function(e){return{currentRecordIndex:e.currentRecordIndex+1}}))},e.finishTraining=function(){e.playTrainingSuccessAudio(),e.setState((function(e){return{isFinished:!0,currentRecordIndex:e.currentRecordIndex+1}})),e.props.onFinishTraining(e.props.deck,e.props.records)},e.playRecordSuccessAudio=function(){e.playAudio(e.recordSuccessAudio.current)},e.playTrainingSuccessAudio=function(){e.playAudio(e.trainingSuccessAudio.current)},e.playAudio=function(e){e.pause(),e.currentTime=0,e.play()},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.deck,a=e.records,n=e.onPageChange,c=this.state,o=c.isFinished,i=c.currentRecordIndex;return r.a.createElement(I,null,r.a.createElement(P,null,r.a.createElement(z,null,t.title),r.a.createElement(T,{percent:f(i,a.length)}),r.a.createElement("br",null),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,i,"/",a.length," ","records learned"),r.a.createElement("br",null)),r.a.createElement(L,{onClick:function(){return n("deck",{deckId:t.id})}},"Back")),o?r.a.createElement(P,null,r.a.createElement(z,null,"Congratulations! Training finished"," ",r.a.createElement("span",{role:"img","aria-label":"trophy"},"\ud83c\udfc6"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null,r.a.createElement(z,null,a[i].firstSide)),r.a.createElement(P,null,r.a.createElement(G,{caption:"enter translation of the record above",targetValue:a[i].secondSide,onSuccess:this.onSuccessInput}))),r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement("audio",{ref:this.recordSuccessAudio,src:Y.a}),r.a.createElement("audio",{ref:this.trainingSuccessAudio,src:ee.a})),r.a.createElement("p",null,"Sound effects obtained from"," ",r.a.createElement("a",{href:"https://www.zapsplat.com",target:"_blank",rel:"noopener noreferrer"},"https://www.zapsplat.com")))}}]),a}(r.a.Component),ae=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).emptyVocabulary={appData:{decksCount:0,learnedDecksCount:0,recordsCount:0,learnedRecordsCount:0},decksById:{},recordsById:{}},e.state=Object(s.a)({page:"decks",pageParams:null},e.emptyVocabulary),e.changePage=function(t,a){e.setState({page:t,pageParams:a})},e.importData=function(t){e.setState(JSON.parse(t))},e.exportData=function(){var t=e.state,a=t.appData,n=t.decksById,r=t.recordsById;g(JSON.stringify({appData:a,decksById:n,recordsById:r}))},e.resetData=function(){e.setState(e.emptyVocabulary)},e.createDeck=function(t){var a=E(t);e.setState((function(e){return{appData:Object(s.a)(Object(s.a)({},e.appData),{},{decksCount:e.appData.decksCount+1}),decksById:Object(s.a)(Object(s.a)({},e.decksById),{},Object(d.a)({},a.id,a))}}))},e.deleteDeck=function(t){e.setState((function(e){var a=e.decksById,n=t.id,r=(a[n],Object(i.a)(a,[n].map(l.a)));return{appData:Object(s.a)(Object(s.a)({},e.appData),{},{decksCount:e.appData.decksCount-1,learnedDecksCount:e.appData.learnedDecksCount,recordsCount:e.appData.recordsCount-t.recordsIds.length,learnedRecordsCount:e.appData.learnedRecordsCount-t.learnedRecordsIds.length}),decksById:r,recordsById:function(){var a=Object(s.a)({},e.recordsById);return t.recordsIds.forEach((function(e){delete a[e]})),a}()}}))},e.getRecordsByDeckId=function(t){return e.state.decksById[t].recordsIds.map((function(t){return e.state.recordsById[t]}))},e.getLearnedRecordsByDeckId=function(t){return e.state.decksById[t].learnedRecordsIds.map((function(t){return e.state.recordsById[t]}))},e.createRecord=function(t){var a=t.firstSide,n=t.secondSide,r=t.deckId,c=k({firstSide:a,secondSide:n,deckId:r});e.setState((function(e){return{appData:Object(s.a)(Object(s.a)({},e.appData),{},{recordsCount:e.appData.recordsCount+1}),decksById:Object(s.a)(Object(s.a)({},e.decksById),{},Object(d.a)({},r,Object(s.a)(Object(s.a)({},e.decksById[r]),{},{recordsIds:e.decksById[r].recordsIds.concat([c.id])}))),recordsById:Object(s.a)(Object(s.a)({},e.recordsById),{},Object(d.a)({},c.id,c))}}))},e.deleteRecord=function(t){e.setState((function(e){var a=t.deckId,n=e.recordsById,r=t.id,c=(n[r],Object(i.a)(n,[r].map(l.a)));return{appData:Object(s.a)(Object(s.a)({},e.appData),{},{recordsCount:e.appData.recordsCount-1,learnedRecordsCount:b(t)?e.appData.learnedRecordsCount-1:e.appData.learnedRecordsCount}),decksById:Object(s.a)(Object(s.a)({},e.decksById),{},Object(d.a)({},a,Object(s.a)(Object(s.a)({},e.decksById[a]),{},{recordsIds:e.decksById[a].recordsIds.filter((function(e){return e!==t.id})),learnedRecordsIds:e.decksById[a].learnedRecordsIds.filter((function(e){return e!==t.id}))}))),recordsById:c}}))},e.updateRecords=function(t,a){var n=a.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{lastRepetition:(new Date).toISOString(),iteration:e.iteration+1})})),r=a.filter(b).length,c=n.filter(b).length-r,o=n.filter(b).map((function(e){return e.id})),i=Object.fromEntries(n.map((function(e){return[e.id,e]})));e.setState((function(e){var a=Object(s.a)(Object(s.a)({},e.recordsById),i),n=Object(s.a)(Object(s.a)({},e.decksById),{},Object(d.a)({},t.id,Object(s.a)(Object(s.a)({},e.decksById[t.id]),{},{learnedRecordsIds:o.reduce((function(e,t){return e.includes(t)?e:e.concat[t]}),e.decksById[t.id].learnedRecordsIds)}))),r=t.learnedRecordsIds!==t.recordsIds&&n[t.id].learnedRecordsIds===n[t.id].recordsCount;return Object(s.a)(Object(s.a)({},e),{},{appData:Object(s.a)(Object(s.a)({},e.appData),{},{learnedRecordsCount:e.appData.learnedRecordsCount+c,learnedDecksCount:r?e.appData.learnedDecksCount+1:e.appData.learnedDecksCount}),decksById:n,recordsById:a})}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){new Promise((function(e,t){var a=localStorage.getItem("abvoc/state");a||t(),e(a)})).then(this.importData)}},{key:"componentDidUpdate",value:function(e,t){var a,n=this.state,r=n.appData,c=n.decksById,o=n.recordsById;r===t.appData&&c===t.decksById&&o===t.recordsById||(a=JSON.stringify({appData:r,decksById:c,recordsById:o}),localStorage.setItem("abvoc/state",a))}},{key:"render",value:function(){var e=this.state,t=e.page,a=e.pageParams,n=e.appData,c=e.decksById,o={params:a};return r.a.createElement(r.a.Fragment,null,"decks"===t&&r.a.createElement(W,{router:o,appData:n,decks:Object.values(c),getRecordsByDeckId:this.getRecordsByDeckId,onPageChange:this.changePage,onDataImport:this.importData,onDataExport:this.exportData,onDataReset:this.resetData,onDeckCreate:this.createDeck,onDeckDelete:this.deleteDeck}),"deck"===t&&r.a.createElement($,{router:o,deck:c[a.deckId],records:this.getRecordsByDeckId(a.deckId),onPageChange:this.changePage,onDeckDelete:this.deleteDeck,onRecordCreate:this.createRecord,onRecordDelete:this.deleteRecord}),"training"===t&&r.a.createElement(te,{router:o,deck:c[a.deckId],records:this.getRecordsByDeckId(a.deckId).sort((function(e,t){return e.lastRepetition<t.lastRepetition?-1:1})).slice(0,5),onPageChange:this.changePage,onFinishTraining:this.updateRecords}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.f791c352.chunk.js.map